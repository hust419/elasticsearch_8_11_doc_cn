##### 本地网关设置

本地网关在集群重新启动时存储集群状态和分片数据。

以下静态设置必须在每个主节点上设置，它们控制新选举的主节点在尝试恢复集群状态和集群数据之前应等待的时间。

修改完这些配置之后，这些设置仅在完全集群重新启动时生效。

**gateway.expected_data_nodes**
（静态）期望在集群中的数据节点数。当期望的数据节点数加入集群时，开始本地分片的恢复。默认为0。

**gateway.recover_after_time**
（静态）如果未达到期望的节点数，恢复过程将在尝试恢复之前等待配置的时间量。默认为5分钟。

一旦`recover_after_time`的持续时间已经超时，只要满足以下条件，恢复将开始：

**gateway.recover_after_data_nodes**
（静态）只要加入集群的数据节点达到指定数量，就会进行恢复。

这些设置可以在elasticsearch.yml中配置，如下所示：

```yaml
gateway.expected_data_nodes: 3
gateway.recover_after_time: 600s
gateway.recover_after_data_nodes: 3
```

##### 悬空索引

当节点加入集群时，如果它在其本地数据目录中找到任何尚不存在于集群中的分片，它将认为这些分片属于“悬空”索引。您可以使用[Dangling indices API](https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-dangling-index.html)列出、导入或删除悬空索引。

该API无法保证导入的数据是否真正代表索引仍然是集群的一部分时的最新状态。
